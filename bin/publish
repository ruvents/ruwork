#!/usr/bin/env bash

if [ ! -f bin/.splitsh/splitsh-lite ]
then
    mkdir -p bin/.splitsh/

    if [[ $OSTYPE == darwin* ]]
    then
        curl -L https://github.com/splitsh/lite/releases/download/v1.0.1/lite_darwin_amd64.tar.gz > bin/.splitsh/splitsh-lite.tar.gz
    else
        curl -L https://github.com/splitsh/lite/releases/download/v1.0.1/lite_linux_amd64.tar.gz > bin/.splitsh/splitsh-lite.tar.gz
    fi

    tar -zxvf bin/.splitsh/splitsh-lite.tar.gz -C bin/.splitsh/  --strip-components=1
    chmod 755 bin/.splitsh/splitsh-lite
fi

git push https://github.com/ruvents/ruwork-admin-bundle.git `bin/.splitsh/splitsh-lite --prefix=src/AdminBundle`:master
git push https://github.com/ruvents/ruwork-api-bundle.git `bin/.splitsh/splitsh-lite --prefix=src/ApiBundle`:master
git push https://github.com/ruvents/ruwork-bundle-test.git `bin/.splitsh/splitsh-lite --prefix=src/BundleTest`:master
git push https://github.com/ruvents/ruwork-doctrine-behaviors-bundle.git `bin/.splitsh/splitsh-lite --prefix=src/DoctrineBehaviorsBundle`:master
git push https://github.com/ruvents/ruwork-doctrine-filter-bundle.git `bin/.splitsh/splitsh-lite --prefix=src/DoctrineFilterBundle`:master
git push https://github.com/ruvents/ruwork-doctrine-postgresql-bundle.git `bin/.splitsh/splitsh-lite --prefix=src/DoctrinePostgresqlBundle`:master
git push https://github.com/ruvents/ruwork-frujax-bundle.git `bin/.splitsh/splitsh-lite --prefix=src/FrujaxBundle`:master
git push https://github.com/ruvents/ruwork-manual-auth-bundle.git `bin/.splitsh/splitsh-lite --prefix=src/ManualAuthBundle`:master
git push https://github.com/ruvents/ruwork-paginator-bundle.git `bin/.splitsh/splitsh-lite --prefix=src/PaginatorBundle`:master
git push https://github.com/ruvents/ruwork-paginator.git `bin/.splitsh/splitsh-lite --prefix=src/Paginator`:master
git push https://github.com/ruvents/ruwork-route-optional-prefix.git `bin/.splitsh/splitsh-lite --prefix=src/RouteOptionalPrefix`:master
git push https://github.com/ruvents/ruwork-routing-tools-bundle.git `bin/.splitsh/splitsh-lite --prefix=src/RoutingToolsBundle`:master
git push https://github.com/ruvents/ruwork-upload-bundle.git `bin/.splitsh/splitsh-lite --prefix=src/UploadBundle`:master
git push https://github.com/ruvents/ruwork-wizard-bundle.git `bin/.splitsh/splitsh-lite --prefix=src/WizardBundle`:master
